<%- include('partials/header') %>

<div class="page-header">
    <h1 class="page-title">
        <span class="icon">üìù</span>
        Macros
    </h1>
</div>

<div class="card">
    <div class="card-header">
        <span class="card-title">Add Macro</span>
    </div>
    <form method="POST" action="/dashboard/macros/add">
        <div class="form-row">
            <div class="form-group">
                <input type="text" name="name" class="form-control" placeholder="Macro name" required>
            </div>
            <div class="form-group">
                <textarea name="content" class="form-control" rows="2" placeholder="Macro content..." required></textarea>
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary">‚ûï Add</button>
            </div>
        </div>
    </form>
</div>

<div class="card">
    <% if (macros && macros.length > 0) { %>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Content</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <% macros.forEach(m => { %>
                <tr>
                    <td><strong><%= m.name %></strong></td>
                    <td><%= m.content ? m.content.substring(0, 100) + (m.content.length > 100 ? '...' : '') : '-' %></td>
                    <td>
                        <form method="POST" action="/dashboard/macros/<%= m.id %>/delete" data-confirm="Delete this macro?" style="display:inline;">
                            <button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è</button>
                        </form>
                    </td>
                </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
    <% } else { %>
    <div class="empty-state">
        <div class="icon">üìù</div>
        <p>No macros configured.</p>
    </div>
    <% } %>
</div>

<%- include('partials/footer') %>
